{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Сard.js","webpack:///./src/components/FormValidator.js","webpack:///./src/components/Section.js","webpack:///./src/components/Popup.js","webpack:///./src/components/PopupWithForm.js","webpack:///./src/components/PopupWithImage.js","webpack:///./src/components/UserInfo.js","webpack:///./src/components/Api.js","webpack:///./src/components/PopupWithConfirm.js","webpack:///./src/pages/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Card","userId","cardSelector","data","handleCardClick","handleLikeClick","handleDeleteButtonClick","this","_userId","_name","_link","link","_alt","alt","_likes","likes","_ownerId","owner","_id","_cardId","_handleCardClick","_handleLikeClick","_handleDeleteButtonClick","_cardSelector","likesCount","undefined","length","_element","querySelector","textContent","isLiked","classList","add","remove","Boolean","find","item","_getLikeCount","document","content","cloneNode","_getTemplate","_likeButton","_elementsCard","_image","_imageCardName","src","_renderButtons","_setEventListeners","addEventListener","FormValidator","config","formElement","_formElement","_formSelector","formSelector","_inputSelector","inputSelector","_submitButtonSelector","submitButtonSelector","_inactiveButtonClass","inactiveButtonClass","_inputErrorClass","inputErrorClass","_errorClass","errorClass","inputElement","errorMessage","errorElement","id","validity","valid","_hideError","_showError","validationMessage","inputList","buttonElement","_hasInvalidInput","setAttribute","removeAttribute","Array","from","querySelectorAll","_toggleButtonState","forEach","_checkInputValidity","some","evt","preventDefault","Section","containerSelector","items","renderer","_array","_renderer","_container","element","prepend","append","Popup","popupSelector","_popup","_handleEscClose","close","removeEventListener","PopupWithForm","handleFormSubmit","_popupSelector","_form","_inputList","_formValues","input","_getInputValues","reset","loading","PopupWithImage","image","caption","UserInfo","userNameSelector","userJobSelector","userAvatar","_userNameElement","_userJobElement","_userAvatar","_userProfileData","job","Api","baseUrl","headers","_baseUrl","_headers","res","ok","json","Promise","reject","status","fetch","then","_handleResponse","about","method","body","JSON","stringify","avatar","cardID","PopupWithConfirm","_popupWithConfirm","configmedHandler","_handleSubmit","popup","popupOpenButton","nameInput","jobInput","popupElementAddButton","popupElement","avatarFormButton","avatarImage","popupAvatarElement","popupConfirm","setEventListeners","popupPicImage","userProfile","api","authorization","getUserInfo","result","setUserInfo","globalHandleCardClick","open","globalHandleLikeCardClick","card","removeLike","setLikesInfo","putLike","globalHandleDeleteCardClick","handleButton","deleteCard","deleteElement","err","console","log","getInitialCards","initialCardList","cardElement","getUserId","generateCard","setItem","renderItems","popupAddPlace","addCard","addItem","error","popupElementValidator","openPopupAndHideErrors","popupEditProfile","userJob","userName","popupAvatar","setUserAvatar","popupProfileValidator","popupAvatarValidator","enableValidation","profileInfo"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,8NClF9C,IAAMC,EAAb,WACE,aAAiFC,EAAQC,GAAc,IAAzFC,EAAyF,EAAzFA,KAAMC,EAAmF,EAAnFA,gBAAiBC,EAAkE,EAAlEA,gBAAiBC,EAAiD,EAAjDA,yB,4FAAiD,SACrGC,KAAKC,QAAUP,EACfM,KAAKE,MAAQN,EAAK5B,KAClBgC,KAAKG,MAAQP,EAAKQ,KAClBJ,KAAKK,KAAOT,EAAKU,IACjBN,KAAKO,OAASX,EAAKY,MACnBR,KAAKS,SAAWb,EAAKc,MAAMC,IAC3BX,KAAKY,QAAUhB,EAAKe,IACpBX,KAAKa,iBAAmBhB,EACxBG,KAAKc,iBAAmBhB,EACxBE,KAAKe,yBAA2BhB,EAChCC,KAAKgB,cAAgBrB,E,UAZzB,O,EAAA,G,EAAA,uCAgBI,IAAMsB,EAA4BC,MAAflB,KAAKO,QAAsC,MAAfP,KAAKO,OAAiB,EAAIP,KAAKO,OAAOY,OACrFnB,KAAKoB,SAASC,cAAc,yBAAyBC,YAAcL,EAC/DjB,KAAKuB,UAEPvB,KAAKoB,SAASC,cAAc,wBAAwBG,UAAUC,IAAI,8BAElEzB,KAAKoB,SAASC,cAAc,wBAAwBG,UAAUE,OAAO,gCAtB3E,gCA0BY,WACR,OAAOC,QAAQ3B,KAAKO,OAAOqB,MAAK,SAAAC,GAAI,OAAIA,EAAKlB,MAAQ,EAAKV,cA3B9D,2BA+BI,OAAOD,KAAKY,UA/BhB,mCAkCehB,GACXI,KAAKO,OAASX,EAAKY,MACnBR,KAAK8B,kBApCT,qCA4CI,OAHoBC,SAASV,cAAcrB,KAAKgB,eAAegB,QAC5DX,cAAc,mBACdY,WAAU,KA3CjB,uCAgDQjC,KAAKS,WAAaT,KAAKC,QACzBD,KAAKoB,SAASC,cAAc,4BAA4BG,UAAUC,IAAI,mCAEtEzB,KAAKoB,SAASC,cAAc,4BAA4BG,UAAUC,IAAI,oCAnD5E,qCAmEI,OAXAzB,KAAKoB,SAAWpB,KAAKkC,eACrBlC,KAAKmC,YAAcnC,KAAKoB,SAASC,cAAc,wBAC/CrB,KAAKoC,cAAgBpC,KAAKoB,SAASC,cAAc,mBACjDrB,KAAKqC,OAASrC,KAAKoB,SAASC,cAAc,yBAC1CrB,KAAKsC,eAAiBtC,KAAKoB,SAASC,cAAc,wBAClDrB,KAAKqC,OAAOE,IAAMvC,KAAKG,MACvBH,KAAKsC,eAAehB,YAActB,KAAKE,MACvCF,KAAKqC,OAAO/B,IAAMN,KAAKE,MACvBF,KAAK8B,gBACL9B,KAAKwC,iBACLxC,KAAKyC,qBACEzC,KAAKoB,WAnEhB,sCAwEIpB,KAAKoB,SAASM,SACd1B,KAAKoB,SAAW,OAzEpB,2CA6EuB,WACnBpB,KAAKqC,OAAOK,iBAAiB,SAAS,WACpC,EAAK7B,iBAAiB,CACpBT,KAAM,EAAKD,MACXnC,KAAM,EAAKkC,WAGfF,KAAKoB,SAASC,cAAc,wBAAwBqB,iBAAiB,SAAS,WAC5E,EAAK5B,iBAAiB,MAGxBd,KAAKoB,SAASC,cAAc,4BAA4BqB,iBAAiB,SAAS,WAChF,EAAK3B,yBAAyB,W,2BAzFpC,K,sKCAO,IAAM4B,EAAb,WACE,WAAYC,EAAQC,I,4FAAa,SAC/B7C,KAAK8C,aAAeD,EACpB7C,KAAK+C,cAAgBH,EAAOI,aAC5BhD,KAAKiD,eAAiBL,EAAOM,cAC7BlD,KAAKmD,sBAAwBP,EAAOQ,qBACpCpD,KAAKqD,qBAAuBT,EAAOU,oBACnCtD,KAAKuD,iBAAmBX,EAAOY,gBAC/BxD,KAAKyD,YAAcb,EAAOc,W,UAR9B,O,EAAA,G,EAAA,kCAYaC,EAAcC,GACvB,IAAMC,EAAe7D,KAAK8C,aAAazB,cAAlB,WAAoCsC,EAAaG,GAAjD,WACrBH,EAAanC,UAAUC,IAAIzB,KAAKuD,kBAChCM,EAAavC,YAAcsC,EAE3BC,EAAarC,UAAUC,IAAIzB,KAAKyD,eAjBpC,iCAuBaE,GACT,IAAME,EAAe7D,KAAK8C,aAAazB,cAAlB,WAAoCsC,EAAaG,GAAjD,WACrBH,EAAanC,UAAUE,OAAO1B,KAAKuD,kBAEnCM,EAAarC,UAAUE,OAAO1B,KAAKyD,aACnCI,EAAavC,YAAc,KA5B/B,0CAiCsBqC,GACbA,EAAaI,SAASC,MAMzBhE,KAAKiE,WAAWN,GAJhB3D,KAAKkE,WAAWP,EAAcA,EAAaQ,qBApCjD,yCA6CqBC,EAAWC,GAExBrE,KAAKsE,iBAAiBF,IAExBC,EAAc7C,UAAUC,IAAI,0BAC5B4C,EAAcE,aAAa,YAAY,KAGvCF,EAAc7C,UAAUE,OAAO,0BAC/B2C,EAAcG,gBAAgB,eAtDpC,2CA4DuB,WACbJ,EAAYK,MAAMC,KAAK1E,KAAK8C,aAAa6B,iBAAiB3E,KAAKiD,iBAC/DoB,EAAgBrE,KAAK8C,aAAazB,cAAcrB,KAAKmD,uBAC3DnD,KAAK4E,mBAAmBR,EAAWC,GACnCD,EAAUS,SAAQ,SAAClB,GACjBA,EAAajB,iBAAiB,SAAS,WACrC,EAAKoC,oBAAoBnB,GACzB,EAAKiB,mBAAmBR,EAAWC,WAnE3C,uCA2EmBD,GAEf,OAAOA,EAAUW,MAAK,SAACpB,GAIrB,OAAQA,EAAaI,SAASC,WAjFpC,+CAuF2B,WACjBI,EAAYK,MAAMC,KAAK1E,KAAK8C,aAAa6B,iBAAiB3E,KAAKiD,iBACrEmB,EAAUS,SAAQ,SAAClB,GACjB,EAAKM,WAAWN,GAChB,IAAMU,EAAgB,EAAKvB,aAAazB,cAAc,EAAK8B,uBAC3D,EAAKyB,mBAAmBR,EAAWC,QA5FzC,yCAkGIrE,KAAK8C,aAAaJ,iBAAiB,UAAU,SAACsC,GAC5CA,EAAIC,oBAENjF,KAAKyC,0B,2BArGT,K,0KCCqByC,E,WACnB,aAAiCC,GAAmB,IAAtCC,EAAsC,EAAtCA,MAAOC,EAA+B,EAA/BA,U,4FAA+B,SAClDrF,KAAKsF,OAASF,EAEdpF,KAAKuF,UAAYF,EAEjBrF,KAAKwF,WAAazD,SAASV,cAAc8D,G,uDAInCM,GACNzF,KAAKwF,WAAWE,QAAQD,K,8BAGlBA,GACNzF,KAAKwF,WAAWG,OAAOF,K,oCAIX,WACZzF,KAAKsF,OAAOT,SAAQ,SAAChD,GACnB,EAAK0D,UAAU1D,W,0MCtBA+D,E,WACnB,WAAYC,GAAe,Y,4FAAA,SACzB7F,KAAK8F,OAAS/D,SAASV,cAAcwE,GACrC7F,KAAK+F,gBAAkB,SAACf,GACN,WAAZA,EAAIhG,KACN,EAAKgH,S,sDAMThG,KAAK8F,OAAOtE,UAAUC,IAAI,gBAC1BM,SAASW,iBAAiB,UAAW1C,KAAK+F,mB,8BAI1C/F,KAAK8F,OAAOtE,UAAUE,OAAO,gBAC7BK,SAASkE,oBAAoB,UAAWjG,KAAK+F,mB,0CAG3B,WAClB/F,KAAK8F,OAAOzE,cAAc,iBAAiBqB,iBAAiB,SAAS,WACnE,EAAKsD,WAEPhG,KAAK8F,OAAOzE,cAAc,mBAAmBqB,iBAAiB,SAAS,WACrE,EAAKsD,gB,ohDCvBUE,E,sQACnB,aAAkCL,GAAe,MAAnCM,EAAmC,EAAnCA,iBAAmC,O,4FAAA,UAC/C,cAAMN,IACDO,eAAiBrE,SAASV,cAAcwE,GAC7C,EAAKQ,MAAQ,EAAKD,eAAe/E,cAAc,gBAC/C,EAAK8E,iBAAmBA,EAJuB,E,uDAO/B,WAWhB,OATAnG,KAAKsG,WAAatG,KAAKqG,MAAM1B,iBAAiB,iBAE9C3E,KAAKuG,YAAc,GAEnBvG,KAAKsG,WAAWzB,SAAQ,SAAA2B,GACtB,EAAKD,YAAYC,EAAMxI,MAAQwI,EAAM9H,SAIhCsB,KAAKuG,c,0CAGM,WAClB,sDACAvG,KAAKoG,eAAe1D,iBAAiB,UAAU,SAACsC,GAC9CA,EAAIC,iBACJ,EAAKkB,iBAAiB,EAAKM,mBAC3B,EAAKT,a,8BAIP,0CACAhG,KAAKqG,MAAMK,U,8BAGLC,GAEJ3G,KAAKqG,MAAMhF,cAAc,kBAAkBC,YADzCqF,EACuD,gBAEA,iB,8BAvCpBf,G,o/CCAtBgB,E,sQACjB,WAAYf,GAAe,O,4FAAA,qBACjBA,G,6CAIS,IAAb7H,EAAa,EAAbA,KAAMoC,EAAO,EAAPA,KACR,yCACA,IAAMyG,EAAQ7G,KAAK8F,OAAOzE,cAAc,uBAClCyF,EAAU9G,KAAK8F,OAAOzE,cAAc,yBAC1CwF,EAAMtE,IAAMnC,EACZyG,EAAMvG,IAAMtC,EACZ8I,EAAQxF,YAActD,O,8BAZc4H,G,0KCDvBmB,E,WACnB,cAA8D,IAAhDC,EAAgD,EAAhDA,iBAAkBC,EAA8B,EAA9BA,gBAAiBC,EAAa,EAAbA,Y,4FAAa,SAC5DlH,KAAKmH,iBAAmBpF,SAASV,cAAc2F,GAC/ChH,KAAKoH,gBAAkBrF,SAASV,cAAc4F,GAC9CjH,KAAKqH,YAActF,SAASV,cAAc6F,G,6DAS1C,OAHAlH,KAAKsH,iBAAmB,GACxBtH,KAAKsH,iBAAiBtJ,KAAOgC,KAAKmH,iBAAiB7F,YACnDtB,KAAKsH,iBAAiBC,IAAMvH,KAAKoH,gBAAgB9F,YAC1CtB,KAAKsH,mB,kCAIZ,OAAOtH,KAAKC,U,kCAIFjC,EAAMuJ,EAAK7H,GACrBM,KAAKmH,iBAAiB7F,YAActD,EACpCgC,KAAKoH,gBAAgB9F,YAAciG,EACnCvH,KAAKC,QAAUP,I,oCAIH6C,GACZvC,KAAKqH,YAAY9E,IAAMA,O,0MC9BNiF,E,WACjB,cAAiC,IAAnBC,EAAmB,EAAnBA,QAASC,EAAU,EAAVA,S,4FAAU,SAC/B1H,KAAK2H,SAAWF,EAChBzH,KAAK4H,SAAWF,E,+DAGFG,GACZ,OAAGA,EAAIC,GACED,EAAIE,OAEJC,QAAQC,OAAR,kBAA0BJ,EAAIK,W,oCAKvC,OAAOC,MAAM,GAAD,OAAInI,KAAK2H,SAAT,aAA8B,CACxCD,QAAS1H,KAAK4H,WAEbQ,KAAKpI,KAAKqI,mB,qCAGc,IAAfrK,EAAe,EAAfA,KAAMsK,EAAS,EAATA,MAElB,OAAOH,MAAM,GAAD,OAAInI,KAAK2H,SAAT,aAA8B,CACxCY,OAAQ,QACRb,QAAS1H,KAAK4H,SACdY,KAAMC,KAAKC,UAAU,CACnB1K,OACAsK,YAGDF,KAAKpI,KAAKqI,mB,wCAIb,OAAOF,MAAM,GAAD,OAAInI,KAAK2H,SAAT,UAA2B,CAErCD,QAAS1H,KAAK4H,WAEbQ,KAAKpI,KAAKqI,mB,uCAKW,IAAVM,EAAU,EAAVA,OAEd,OAAOR,MAAM,GAAD,OAAInI,KAAK2H,SAAT,oBAAqC,CAC/CY,OAAQ,QACRb,QAAS1H,KAAK4H,SACdY,KAAMC,KAAKC,UAAU,CACnBC,aAGDP,KAAKpI,KAAKqI,mB,iCAGc,IAAnBrK,EAAmB,EAAnBA,KAAMoC,EAAa,EAAbA,KAAME,EAAO,EAAPA,IAEpB,OAAO6H,MAAM,GAAD,OAAInI,KAAK2H,SAAT,UAA2B,CACrCY,OAAQ,OACRb,QAAS1H,KAAK4H,SACdY,KAAMC,KAAKC,UAAU,CACnB1K,OACAoC,OACAE,UAGD8H,KAAKpI,KAAKqI,mB,8BAGPO,GACN,OAAOT,MAAM,GAAD,OAAInI,KAAK2H,SAAT,wBAAiCiB,GAAU,CACrDL,OAAQ,MACRb,QAAS1H,KAAK4H,WAEbQ,KAAKpI,KAAKqI,mB,iCAGHO,GACV,OAAOT,MAAM,GAAD,OAAInI,KAAK2H,SAAT,kBAA2BiB,GAAU,CAC/CL,OAAQ,SACRb,QAAS1H,KAAK4H,WAEbQ,KAAKpI,KAAKqI,mB,iCAGJO,GACT,OAAOT,MAAM,GAAD,OAAInI,KAAK2H,SAAT,wBAAiCiB,GAAU,CACrDL,OAAQ,SACRb,QAAS1H,KAAK4H,WAEbQ,KAAKpI,KAAKqI,sB,uhDCzFAQ,E,sQACnB,WAAYhD,GAAe,a,4FAAA,UACzB,cAAMA,IACDO,eAAiBrE,SAASV,cAAcwE,GAC7C,EAAKiD,kBAAoB,EAAKA,kBAAkB7J,KAAvB,MAHA,E,kDAMd8J,GACX/I,KAAKgJ,cAAgBD,I,wCAGL/D,GAChBA,EAAIC,iBACJjF,KAAKgJ,kB,6BAIL,yCACAhJ,KAAKoG,eAAe1D,iBAAiB,SAAU1C,KAAK8I,qB,8BAIpD,0CACA9I,KAAKoG,eAAeH,oBAAoB,SAAUjG,KAAK8I,wB,8BAvBblD,GCSxCqD,G,KAAQlH,SAASV,cAAc,mBAC/B6H,EAAkBnH,SAASV,cAAc,yBACzC8H,EAAYpH,SAASV,cAAc,2BACnC+H,EAAWrH,SAASV,cAAc,0BAClCgI,EAAwBtH,SAASV,cAAc,wBAC/CiI,EAAevH,SAASV,cAAc,kBAItCkI,EAAmBxH,SAASV,cAAc,2BAC1CmI,EAAczH,SAASV,cAAc,oBACrCoI,EAAqB1H,SAASV,cAAc,iBAE5CuB,EAAS,CACXI,aAAc,eACdE,cAAe,gBACfE,qBAAsB,iBACtBE,oBAAqB,yBACrBE,gBAAiB,0BACjBE,WAAY,6BAUVgG,EAAe,IAAIb,EAAiB,iBAC1Ca,EAAaC,oBAGb,IAAMC,EAAgB,IAAIhD,EAXC,gBAY3BgD,EAAcD,oBAGd,IAAME,EAAc,IAAI9C,EAAS,CAC7BC,iBAbwB,iBAcxBC,gBAbuB,0BAacC,WAhCX,qBAoCxB4C,EAAM,IAAItC,EAAI,CAChBC,QAAS,8CACTC,QAAS,CACL,eAAgB,mBAChBqC,cAAe,0CAIvBD,EAAIE,cACC5B,MAAK,SAAC6B,GACHJ,EAAYK,YAAYD,EAAOjM,KAAMiM,EAAO3B,MAAO2B,EAAOtJ,QAIlE,IAAMwJ,GAAwB,SAACvK,GAC3BgK,EAAcQ,KAAKxK,IAEjByK,GAA4B,SAACC,GAC3BA,EAAK/I,UACLuI,EAAIS,WAAWD,EAAKxG,MACfsE,MAAK,SAACxI,GACH0K,EAAKE,aAAa5K,MAG1BkK,EAAIW,QAAQH,EAAKxG,MACZsE,MAAK,SAACxI,GACH0K,EAAKE,aAAa5K,OAI5B8K,GAA8B,SAACJ,GACjCZ,EAAaU,OACbV,EAAaiB,cAAa,WACtBb,EAAIc,WAAWN,EAAKxG,MACfsE,MAAK,SAACxI,GACH0K,EAAKO,cAAcjL,MAF3B,OAIW,SAACkL,GACJC,QAAQC,IAAIF,MALpB,SAOa,WACLpB,EAAa1D,eAK7B8D,EAAImB,kBACC7C,MAAK,SAAC6B,GACH,IAAMiB,EAAkB,IAAIhG,EAAQ,CAEhCE,MAAO6E,EACP5E,SAAU,SAACxD,GACP,IAMMsJ,EANO,IAAI1L,EAAK,CAClBG,KAAMiC,EACNhC,gBAAiBsK,GACjBrK,gBAAiBuK,GACjBtK,wBAAyB2K,IAC1Bb,EAAYuB,YAAa,YACHC,eACzBH,EAAgBI,QAAQH,KA/EF,aAqF9BD,EAAgBK,cAGhB,IAAMC,EAAgB,IAAItF,EAAc,CACpCC,iBAAkB,SAACtE,GACf2J,EAAc7E,SAAQ,GACtBmD,EAAI2B,QAAQ5J,GACPuG,MAAK,SAACvG,GAEH,IAMMsJ,EANO,IAAI1L,EAAK,CAClBG,KAAMiC,EACNhC,gBAAiBsK,GACjBrK,gBAAiBuK,GACjBtK,wBAAyB2K,IAC1Bb,EAAYuB,YAAa,YACHC,eACzBH,EAAgBQ,QAAQP,MAVhC,OAaW,SAACQ,GAAD,OAAWZ,QAAQY,MAAMA,MAbpC,SAca,WACLH,EAAc7E,SAAQ,GACtB6E,EAAcxF,aA1GR,kBAgHtBwF,EAAc7B,oBACdN,EAAsB3G,iBAAiB,SAAS,WAE5CkJ,GAAsBC,yBAEtBL,EAAcpB,aApD1B,OAwDW,SAACU,GACJC,QAAQC,IAAIF,MAIpB,IAAMgB,GAAmB,IAAI5F,EAAc,CACvCC,iBAAkB,YAA2B,IAAxB4F,EAAwB,EAAxBA,QAASC,EAAe,EAAfA,SAC1BF,GAAiBnF,SAAQ,GACzBmD,EAAII,YAAY,CACZlM,KAAMgO,EACN1D,MAAOyD,IAEN3D,MAAK,SAAC6B,GACHJ,EAAYK,YAAYD,EAAOjM,KAAMiM,EAAO3B,UALpD,OAQW,SAACqD,GAAD,OAAWZ,QAAQY,MAAMA,MARpC,SASa,WACLG,GAAiBnF,SAAQ,GACzBmF,GAAiB9F,aA9JA,kBAmKjC8F,GAAiBnC,oBAGjB,IAAMsC,GAAc,IAAI/F,EAAc,CAClCC,iBAAkB,YAAc,IAAX/F,EAAW,EAAXA,KACjB6L,GAAYtF,SAAQ,GACpBmD,EAAIoC,cAAc,CAAEvD,OAAQvI,IACvBgI,MAAK,SAACP,GAEH2B,EAAYjH,IAAMsF,EAAIc,UAH9B,OAKW,SAAAmC,GAAG,OAAIC,QAAQC,IAAIF,MAL9B,SAMa,WACLmB,GAAYtF,SAAQ,GACpBsF,GAAYjG,aA/KO,iBAoLnCiG,GAAYtC,oBAEZG,EAAIE,cACC5B,MAAK,SAAC6B,GACHJ,EAAYqC,cAAcjC,EAAOtB,WAGzC,IAAMwD,GAAwB,IAAIxJ,EAAcC,EAAQqG,GAClD2C,GAAwB,IAAIjJ,EAAcC,EAAQ0G,GAClD8C,GAAuB,IAAIzJ,EAAcC,EAAQ6G,GACvDmC,GAAsBS,mBACtBF,GAAsBE,mBACtBD,GAAqBC,mBAErBnD,EAAgBxG,iBAAiB,SAAS,WACtC,IAAM4J,EAAczC,EAAYG,cAEhCb,EAAUzK,MAAQ4N,EAAYtO,KAC9BoL,EAAS1K,MAAQ4N,EAAY/E,IAE7B4E,GAAsBN,yBACtBC,GAAiB1B,UAIrBb,EAAiB7G,iBAAiB,SAAS,WACvCuJ,GAAY7B","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","export class Card {\r\n  constructor({ data, handleCardClick, handleLikeClick, handleDeleteButtonClick }, userId, cardSelector) {\r\n    this._userId = userId;\r\n    this._name = data.name;\r\n    this._link = data.link;\r\n    this._alt = data.alt;\r\n    this._likes = data.likes;\r\n    this._ownerId = data.owner._id;\r\n    this._cardId = data._id;\r\n    this._handleCardClick = handleCardClick;\r\n    this._handleLikeClick = handleLikeClick;\r\n    this._handleDeleteButtonClick = handleDeleteButtonClick;\r\n    this._cardSelector = cardSelector;\r\n  }\r\n\r\n  _getLikeCount() {\r\n    const likesCount = this._likes == undefined || this._likes == null ? 0 : this._likes.length;\r\n    this._element.querySelector('.elements__like-count').textContent = likesCount;\r\n    if (this.isLiked()) {\r\n\r\n      this._element.querySelector('.elements__card-icon').classList.add('elements__card-icon_active');\r\n    } else {\r\n      this._element.querySelector('.elements__card-icon').classList.remove('elements__card-icon_active');\r\n    }\r\n  }\r\n\r\n  isLiked() {\r\n    return Boolean(this._likes.find(item => item._id === this._userId));\r\n  }\r\n\r\n  id() {\r\n    return this._cardId;\r\n  }\r\n\r\n  setLikesInfo(data) {\r\n    this._likes = data.likes;\r\n    this._getLikeCount();\r\n\r\n  }\r\n\r\n  _getTemplate() {\r\n    const cardElement = document.querySelector(this._cardSelector).content\r\n      .querySelector('.elements__card')\r\n      .cloneNode(true);\r\n    return cardElement\r\n  }\r\n\r\n  _renderButtons() {\r\n    if (this._ownerId === this._userId) {\r\n      this._element.querySelector('.elements__remove-button').classList.add('elements__remove-button_visible')\r\n    } else {\r\n      this._element.querySelector('.elements__remove-button').classList.add('elements__remove-button_hidden')\r\n    }\r\n  }\r\n\r\n  generateCard() {\r\n    this._element = this._getTemplate();\r\n    this._likeButton = this._element.querySelector('.elements__card-icon');\r\n    this._elementsCard = this._element.querySelector('.elements__card');\r\n    this._image = this._element.querySelector('.elements__card-image');\r\n    this._imageCardName = this._element.querySelector('.elements__card-name')\r\n    this._image.src = this._link;\r\n    this._imageCardName.textContent = this._name;\r\n    this._image.alt = this._name;\r\n    this._getLikeCount();\r\n    this._renderButtons();\r\n    this._setEventListeners()\r\n    return this._element;\r\n\r\n  }\r\n\r\n  deleteElement() {\r\n    this._element.remove();\r\n    this._element = null;\r\n    \r\n  }\r\n\r\n  _setEventListeners() {\r\n    this._image.addEventListener('click', () => {\r\n      this._handleCardClick({\r\n        link: this._link,\r\n        name: this._name,\r\n      });\r\n    });\r\n    this._element.querySelector('.elements__card-icon').addEventListener('click', () => {\r\n      this._handleLikeClick(this);\r\n      \r\n    });\r\n    this._element.querySelector('.elements__remove-button').addEventListener('click', () => {\r\n      this._handleDeleteButtonClick(this);\r\n    });\r\n  }\r\n}\r\n\r\n\r\n","export class FormValidator {\r\n  constructor(config, formElement) {\r\n    this._formElement = formElement;\r\n    this._formSelector = config.formSelector;\r\n    this._inputSelector = config.inputSelector;\r\n    this._submitButtonSelector = config.submitButtonSelector\r\n    this._inactiveButtonClass = config.inactiveButtonClass;\r\n    this._inputErrorClass = config.inputErrorClass;\r\n    this._errorClass = config.errorClass;\r\n  }\r\n\r\n  // Функция, которая добавляет класс с ошибкой\r\n  _showError(inputElement, errorMessage) {\r\n    const errorElement = this._formElement.querySelector(`#${inputElement.id}-error`);\r\n    inputElement.classList.add(this._inputErrorClass);\r\n    errorElement.textContent = errorMessage;\r\n    // Показываем сообщение об ошибке\r\n    errorElement.classList.add(this._errorClass);\r\n\r\n  };\r\n\r\n\r\n  // Функция, которая удаляет класс с ошибкой\r\n  _hideError(inputElement) {\r\n    const errorElement = this._formElement.querySelector(`#${inputElement.id}-error`);\r\n    inputElement.classList.remove(this._inputErrorClass);\r\n    // Скрываем сообщение об ошибке\r\n    errorElement.classList.remove(this._errorClass);\r\n    errorElement.textContent = '';\r\n\r\n  };\r\n\r\n  // Функция, которая проверяет валидность поля\r\n  _checkInputValidity(inputElement) {\r\n    if (!inputElement.validity.valid) {\r\n      // Если поле не проходит валидацию, покажем ошибку\r\n      this._showError(inputElement, inputElement.validationMessage);\r\n\r\n    } else {\r\n      // Если проходит, скроем\r\n      this._hideError(inputElement);\r\n    }\r\n  };\r\n\r\n  // функция переключения кнопки \r\n  _toggleButtonState(inputList, buttonElement) {\r\n    // Если есть хотя бы один невалидный инпут\r\n    if (this._hasInvalidInput(inputList)) {\r\n      // сделай кнопку неактивной\r\n      buttonElement.classList.add('popup__button_inactive');\r\n      buttonElement.setAttribute('disabled', true);\r\n    } else {\r\n      // иначе сделай кнопку активной\r\n      buttonElement.classList.remove('popup__button_inactive');\r\n      buttonElement.removeAttribute('disabled');\r\n    }\r\n  };\r\n\r\n\r\n  //слушатель всех форм\r\n  _setEventListeners() {\r\n    const inputList = Array.from(this._formElement.querySelectorAll(this._inputSelector));\r\n    const buttonElement = this._formElement.querySelector(this._submitButtonSelector);\r\n    this._toggleButtonState(inputList, buttonElement);\r\n    inputList.forEach((inputElement) => {\r\n      inputElement.addEventListener('input', () => {\r\n        this._checkInputValidity(inputElement);\r\n        this._toggleButtonState(inputList, buttonElement);\r\n\r\n      });\r\n\r\n    });\r\n  }\r\n\r\n  // Функция проверяющая валидность полей\r\n  _hasInvalidInput(inputList) {\r\n    // проходим по этому массиву методом some\r\n    return inputList.some((inputElement) => {\r\n      // Если поле не валидно, колбэк вернёт true\r\n      // Обход массива прекратится и вся фунцкция\r\n      // hasInvalidInput вернёт true\r\n      return !inputElement.validity.valid;\r\n    })\r\n  };\r\n\r\n\r\n  //скрываем ошибки при открытии\r\n  openPopupAndHideErrors() {\r\n    const inputList = Array.from(this._formElement.querySelectorAll(this._inputSelector));\r\n    inputList.forEach((inputElement) => {\r\n      this._hideError(inputElement);\r\n      const buttonElement = this._formElement.querySelector(this._submitButtonSelector);\r\n      this._toggleButtonState(inputList, buttonElement);\r\n    });\r\n  }\r\n\r\n  // функция валидации формы на основании параметров в объекте\r\n  enableValidation() {\r\n    this._formElement.addEventListener('submit', (evt) => {\r\n      evt.preventDefault();\r\n    });\r\n    this._setEventListeners();\r\n  }\r\n}  ","//отвечает за отрисовку элементов на странице\r\nexport default class Section {\r\n  constructor({ items, renderer }, containerSelector) {\r\n    this._array = items;\r\n    //функция, которая отвечает за создание и отрисовку данных на странице.\r\n    this._renderer = renderer;\r\n    //DOM-элемент, найденный по селектору \r\n    this._container = document.querySelector(containerSelector)\r\n\r\n  }\r\n  // вставляем element методом append в поле _container\r\n  addItem(element) {\r\n    this._container.prepend(element);\r\n  }\r\n\r\n  setItem(element) {\r\n    this._container.append(element);\r\n  }\r\n\r\n  //перебирает массив данных и для каждого элемента массива вызывает renderer\r\n  renderItems() {\r\n    this._array.forEach((item) => {\r\n      this._renderer(item);\r\n\r\n    });\r\n  };\r\n\r\n}\r\n\r\n\r\n","export default class Popup {\r\n  constructor(popupSelector) {\r\n    this._popup = document.querySelector(popupSelector);\r\n    this._handleEscClose = (evt) => {\r\n      if (evt.key === 'Escape') {\r\n        this.close();\r\n      }\r\n    }\r\n  }\r\n\r\n  open() {\r\n    this._popup.classList.add('popup_opened');\r\n    document.addEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n  close() {\r\n    this._popup.classList.remove('popup_opened');\r\n    document.removeEventListener('keydown', this._handleEscClose);\r\n  }\r\n\r\n  setEventListeners() {\r\n    this._popup.querySelector('.popup__close').addEventListener('click', () => {\r\n      this.close();\r\n    });\r\n    this._popup.querySelector('.popup__overlay').addEventListener('click', () => {\r\n      this.close();\r\n    });\r\n  }\r\n}\r\n\r\n\r\n","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithForm extends Popup {\r\n  constructor({ handleFormSubmit }, popupSelector) {\r\n    super(popupSelector);\r\n    this._popupSelector = document.querySelector(popupSelector);\r\n    this._form = this._popupSelector.querySelector('.popup__form');\r\n    this.handleFormSubmit = handleFormSubmit;\r\n\r\n  }\r\n  _getInputValues() {\r\n    // достаём все элементы полей\r\n    this._inputList = this._form.querySelectorAll('.popup__input');\r\n    // создаём пустой объект\r\n    this._formValues = {};\r\n    // добавляем в этот объект значения всех полей\r\n    this._inputList.forEach(input => {\r\n      this._formValues[input.name] = input.value;\r\n\r\n    });\r\n    // возвращаем объект значений\r\n    return this._formValues;\r\n  }\r\n\r\n  setEventListeners() {\r\n    super.setEventListeners();\r\n    this._popupSelector.addEventListener('submit', (evt) => {\r\n      evt.preventDefault();\r\n      this.handleFormSubmit(this._getInputValues())\r\n      this.close();\r\n    })\r\n  }\r\n  close() {\r\n    super.close();\r\n    this._form.reset();\r\n  }\r\n\r\n  loading(loading) {\r\n    if (loading) {\r\n      this._form.querySelector('.popup__button').textContent = 'Сохранение...';\r\n    } else {\r\n      this._form.querySelector('.popup__button').textContent = 'Сохранить';\r\n    }\r\n  }\r\n\r\n}\r\n","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithImage extends Popup {\r\n    constructor(popupSelector) {\r\n        super(popupSelector);\r\n\r\n    }\r\n\r\n    open({name, link}) {\r\n        super.open();\r\n        const image = this._popup.querySelector('.popup-image__image');\r\n        const caption = this._popup.querySelector('.popup-image__caption');\r\n        image.src = link;\r\n        image.alt = name;\r\n        caption.textContent = name;\r\n\r\n    }\r\n}\r\n\r\n","//управление отображением информации о пользователе на странице.\r\nexport default class UserInfo {\r\n  constructor({ userNameSelector, userJobSelector, userAvatar}) {\r\n    this._userNameElement = document.querySelector(userNameSelector);\r\n    this._userJobElement = document.querySelector(userJobSelector);\r\n    this._userAvatar = document.querySelector(userAvatar);\r\n    \r\n  }\r\n\r\n  //возвращает объект с данными пользователя. Этот метод пригодится когда данные пользователя нужно будет подставить в форму при открытии.\r\n  getUserInfo() {\r\n    this._userProfileData = {};\r\n    this._userProfileData.name = this._userNameElement.textContent;\r\n    this._userProfileData.job = this._userJobElement.textContent;\r\n    return this._userProfileData;\r\n  }\r\n\r\n  getUserId() {\r\n    return this._userId;\r\n  }\r\n\r\n  //принимает новые данные пользователя и добавляет их на страницу\r\n  setUserInfo(name, job, userId) {\r\n    this._userNameElement.textContent = name;\r\n    this._userJobElement.textContent = job;\r\n    this._userId = userId;\r\n\r\n  }\r\n\r\n  setUserAvatar(src) {\r\n    this._userAvatar.src = src;\r\n}\r\n}","export default class Api {\r\n    constructor({ baseUrl, headers}) {\r\n      this._baseUrl = baseUrl;\r\n      this._headers = headers;\r\n    }\r\n\r\n    _handleResponse(res) {\r\n        if(res.ok) {\r\n          return res.json();\r\n        } else {\r\n          return Promise.reject(`Ошибка: ${res.status}`);\r\n        }\r\n      }\r\n\r\n      getUserInfo() {\r\n        return fetch(`${this._baseUrl}/users/me`, {\r\n          headers: this._headers\r\n        })\r\n          .then(this._handleResponse)\r\n      }\r\n\r\n      setUserInfo( {name, about} ) {\r\n        //loading(true);\r\n        return fetch(`${this._baseUrl}/users/me`, {\r\n          method: 'PATCH',\r\n          headers: this._headers,\r\n          body: JSON.stringify({\r\n            name,\r\n            about\r\n          })\r\n        })\r\n          .then(this._handleResponse)\r\n      }\r\n\r\n      getInitialCards() {\r\n        return fetch(`${this._baseUrl}/cards`, {\r\n          //method: 'GET',\r\n          headers: this._headers\r\n        })\r\n          .then(this._handleResponse)\r\n      }\r\n\r\n      \r\n\r\n      setUserAvatar({ avatar }) {\r\n            \r\n        return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n          method: 'PATCH',\r\n          headers: this._headers,\r\n          body: JSON.stringify({\r\n            avatar\r\n          })\r\n        })\r\n          .then(this._handleResponse)\r\n      }\r\n\r\n      addCard({ name, link, alt }) {\r\n        //loading(true);\r\n        return fetch(`${this._baseUrl}/cards`, {\r\n          method: 'POST',\r\n          headers: this._headers,\r\n          body: JSON.stringify({\r\n            name,\r\n            link,\r\n            alt\r\n          })\r\n        })\r\n          .then(this._handleResponse)\r\n      }\r\n\r\n      putLike(cardID) {\r\n        return fetch(`${this._baseUrl}/cards/likes/${cardID}`, {\r\n          method: 'PUT',\r\n          headers: this._headers,\r\n        })\r\n          .then(this._handleResponse)\r\n      }\r\n\r\n      deleteCard (cardID) {\r\n        return fetch(`${this._baseUrl}/cards/${cardID}`, {\r\n          method: 'DELETE',\r\n          headers: this._headers,\r\n        })\r\n          .then(this._handleResponse)\r\n      }\r\n\r\n      removeLike(cardID) {\r\n        return fetch(`${this._baseUrl}/cards/likes/${cardID}`, {\r\n          method: 'DELETE',\r\n          headers: this._headers,\r\n        })\r\n          .then(this._handleResponse)\r\n      } \r\n}","import Popup from './Popup.js';\r\n\r\nexport default class PopupWithConfirm extends Popup {\r\n  constructor(popupSelector) {\r\n    super(popupSelector);\r\n    this._popupSelector = document.querySelector(popupSelector);\r\n    this._popupWithConfirm = this._popupWithConfirm.bind(this);\r\n  }\r\n\r\n  handleButton(configmedHandler) {\r\n    this._handleSubmit = configmedHandler;\r\n  }\r\n\r\n  _popupWithConfirm(evt) {\r\n    evt.preventDefault();\r\n    this._handleSubmit();\r\n  }\r\n\r\n  open() {\r\n    super.open();\r\n    this._popupSelector.addEventListener('submit', this._popupWithConfirm);\r\n  }\r\n\r\n  close() {\r\n    super.close();\r\n    this._popupSelector.removeEventListener('submit', this._popupWithConfirm);\r\n  }\r\n}","import { Card } from '../components/Сard.js';\r\nimport { FormValidator } from '../components/FormValidator.js';\r\nimport Section from '../components/Section.js';\r\nimport PopupWithForm from '../components/PopupWithForm.js';\r\nimport PopupWithImage from '../components/PopupWithImage.js';\r\nimport UserInfo from '../components/UserInfo.js';\r\nimport Api from '../components/Api.js';\r\nimport PopupWithConfirm from '../components/PopupWithConfirm.js';\r\nimport './index.css';\r\n\r\n\r\nconst popup = document.querySelector('.popup-profile');\r\nconst popupOpenButton = document.querySelector('.profile__button-edit');\r\nconst nameInput = document.querySelector('.popup__input_type_name');\r\nconst jobInput = document.querySelector('.popup__input_type_job');\r\nconst popupElementAddButton = document.querySelector('.profile__button-add');\r\nconst popupElement = document.querySelector('.popup-element');\r\nconst popupEditProfileSelector = '.popup-profile';\r\nconst avatarProfileSelector = '.profile__avatar';\r\nconst popupAvatarProfileSelector = '.popup-avatar';\r\nconst avatarFormButton = document.querySelector('.profile__avatar-button');\r\nconst avatarImage = document.querySelector('.profile__avatar');\r\nconst popupAvatarElement = document.querySelector('.popup-avatar');\r\n\r\nconst config = {\r\n    formSelector: '.popup__form',\r\n    inputSelector: '.popup__input',\r\n    submitButtonSelector: '.popup__button',\r\n    inactiveButtonClass: 'popup__button_disabled',\r\n    inputErrorClass: 'popup__input_type_error',\r\n    errorClass: 'popup__input-error_active'\r\n}\r\n\r\nconst openPopupWithImage = '.popup-image';\r\nconst containerCardElementsSelector = '.elements';\r\nconst popupAddPlaceSelector = '.popup-element';\r\nconst profileNameSelector = '.profile__user';\r\nconst profileJobSelector = '.profile__user-explorer';\r\n\r\n// Создание экземпляра класса с подтверждением удаления карточки\r\nconst popupConfirm = new PopupWithConfirm('.popup-delete');\r\npopupConfirm.setEventListeners();\r\n\r\n//открываем попап с изображением\r\nconst popupPicImage = new PopupWithImage(openPopupWithImage);\r\npopupPicImage.setEventListeners();\r\n\r\n// Создание экземпляра класса с информацией о пользователе\r\nconst userProfile = new UserInfo({\r\n    userNameSelector: profileNameSelector,\r\n    userJobSelector: profileJobSelector, userAvatar: avatarProfileSelector\r\n});\r\n//const userId = userProfile.getUserId();\r\n\r\nconst api = new Api({\r\n    baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-14',\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n        authorization: '401963c2-8e67-4398-84ba-2d7df4f163fe'\r\n    }\r\n});\r\n\r\napi.getUserInfo()\r\n    .then((result) => {\r\n        userProfile.setUserInfo(result.name, result.about, result._id);\r\n\r\n    })\r\n\r\nconst globalHandleCardClick = (data) => {\r\n    popupPicImage.open(data)\r\n}\r\nconst globalHandleLikeCardClick = (card) => {\r\n    if (card.isLiked()) {\r\n        api.removeLike(card.id())\r\n            .then((data) => {\r\n                card.setLikesInfo(data)\r\n            })\r\n    } else {\r\n        api.putLike(card.id())\r\n            .then((data) => {\r\n                card.setLikesInfo(data)\r\n            })\r\n    }\r\n}\r\nconst globalHandleDeleteCardClick = (card) => {\r\n    popupConfirm.open();\r\n    popupConfirm.handleButton(() => {\r\n        api.deleteCard(card.id())\r\n            .then((data) => {\r\n                card.deleteElement(data)\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            })\r\n            .finally(() => {\r\n                popupConfirm.close();\r\n            })\r\n    })\r\n}\r\n\r\napi.getInitialCards()\r\n    .then((result) => {\r\n        const initialCardList = new Section({\r\n            //items: initialCards,\r\n            items: result,\r\n            renderer: (item) => {  // { name, link } //функция, которая отвечает за создание и отрисовку данных на странице\r\n                const card = new Card({\r\n                    data: item,\r\n                    handleCardClick: globalHandleCardClick,\r\n                    handleLikeClick: globalHandleLikeCardClick,\r\n                    handleDeleteButtonClick: globalHandleDeleteCardClick\r\n                }, userProfile.getUserId(), '#element');\r\n                const cardElement = card.generateCard();\r\n                initialCardList.setItem(cardElement);\r\n\r\n            },\r\n        },\r\n            containerCardElementsSelector\r\n        );\r\n        initialCardList.renderItems();//подгружаем начальный массив с фотографиямиnp\r\n\r\n        //cоздаем попап добавления фотографий\r\n        const popupAddPlace = new PopupWithForm({\r\n            handleFormSubmit: (item) => {\r\n                popupAddPlace.loading(true);\r\n                api.addCard(item)\r\n                    .then((item) => {\r\n\r\n                        const card = new Card({\r\n                            data: item,\r\n                            handleCardClick: globalHandleCardClick,\r\n                            handleLikeClick: globalHandleLikeCardClick,\r\n                            handleDeleteButtonClick: globalHandleDeleteCardClick\r\n                        }, userProfile.getUserId(), '#element');\r\n                        const cardElement = card.generateCard();\r\n                        initialCardList.addItem(cardElement);\r\n\r\n                    })\r\n                    .catch((error) => console.error(error))\r\n                    .finally(() => {\r\n                        popupAddPlace.loading(false);\r\n                        popupAddPlace.close();\r\n                    })\r\n            }\r\n        }, popupAddPlaceSelector);\r\n\r\n        //слушатель попапа добавления фотографий\r\n        popupAddPlace.setEventListeners();\r\n        popupElementAddButton.addEventListener('click', () => {\r\n\r\n            popupElementValidator.openPopupAndHideErrors();\r\n\r\n            popupAddPlace.open();\r\n\r\n        });\r\n    })\r\n    .catch((err) => {\r\n        console.log(err); // выведем ошибку в консоль\r\n    });\r\n\r\n// создаем попап редактирования профиля\r\nconst popupEditProfile = new PopupWithForm({\r\n    handleFormSubmit: ({ userJob, userName }) => {\r\n        popupEditProfile.loading(true);\r\n        api.setUserInfo({\r\n            name: userName,\r\n            about: userJob\r\n        })\r\n            .then((result) => {\r\n                userProfile.setUserInfo(result.name, result.about)\r\n\r\n            })\r\n            .catch((error) => console.error(error))\r\n            .finally(() => {\r\n                popupEditProfile.loading(false);\r\n                popupEditProfile.close();\r\n            })\r\n    }\r\n}, popupEditProfileSelector)\r\n\r\npopupEditProfile.setEventListeners();\r\n\r\n// создаем попап изменения аватара профиля\r\nconst popupAvatar = new PopupWithForm({\r\n    handleFormSubmit: ({ link }) => {\r\n        popupAvatar.loading(true);\r\n        api.setUserAvatar({ avatar: link })\r\n            .then((res) => {\r\n\r\n                avatarImage.src = res.avatar;\r\n            })\r\n            .catch(err => console.log(err))\r\n            .finally(() => {\r\n                popupAvatar.loading(false);\r\n                popupAvatar.close();\r\n            })\r\n    }\r\n}, popupAvatarProfileSelector)\r\n\r\npopupAvatar.setEventListeners();\r\n\r\napi.getUserInfo()\r\n    .then((result) => {\r\n        userProfile.setUserAvatar(result.avatar);\r\n    })\r\n\r\nconst popupProfileValidator = new FormValidator(config, popup);\r\nconst popupElementValidator = new FormValidator(config, popupElement);\r\nconst popupAvatarValidator = new FormValidator(config, popupAvatarElement);\r\npopupElementValidator.enableValidation();\r\npopupProfileValidator.enableValidation();\r\npopupAvatarValidator.enableValidation();\r\n\r\npopupOpenButton.addEventListener('click', () => {\r\n    const profileInfo = userProfile.getUserInfo();\r\n\r\n    nameInput.value = profileInfo.name;\r\n    jobInput.value = profileInfo.job;\r\n\r\n    popupProfileValidator.openPopupAndHideErrors();\r\n    popupEditProfile.open()\r\n\r\n});\r\n\r\navatarFormButton.addEventListener('click', () => {\r\n    popupAvatar.open();\r\n\r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":""}